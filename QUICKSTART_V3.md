# 🚀 快速启动指南 - 塔罗占卜 V3

## ✅ 重构已完成！

**当前版本**: V3 - 渐进式翻牌版（过去→现在→未来）

---

## 📋 检查清单

- ✅ 已删除 `tarot_v2.py`
- ✅ 已重构 `tarot.py` 为渐进式翻牌
- ✅ 已更新 `main.py` 导入和回调注册
- ✅ 已通过语法检查
- ✅ 已创建文档和演示脚本

---

## 🎮 启动 Bot

```bash
cd /Users/harleyma/Codes/运势大师/fortune_master
python3 main.py
```

---

## 🧪 测试命令

### 1. 基础占卜
```
/tarot 我应该换工作吗
```

**预期流程**:
1. Bot 显示准备阶段提示 → 按钮：`🎴 我准备好了`
2. 点击后翻开第1张（过去）→ 按钮：`➡️ 翻开第 2 张 (现在)` / `⏸️ 让我想想`
3. 点击后翻开第2张（现在）→ 按钮：`➡️ 翻开第 3 张 (未来)` / `⏸️ 让我想想`
4. 点击后翻开第3张（未来）→ 按钮：`📊 查看完整解读`
5. 点击后显示完整结果 → 按钮：`📖 查看深度解读` / `🔁 再占一次` / `🌙 今日运势`

### 2. 测试暂停功能
```
/tarot 测试问题
```

在任何一张牌后点击 `⏸️ 让我想想`，然后点击 `🎴 继续翻开 (下个位置)`

### 3. 群组测试
在群组中：
```
/tarot 团队项目会成功吗
```

完成后会自动加入群排行榜，结果页会显示 `🏆 查看群排行` 按钮

---

## 🎭 演示脚本

```bash
python3 scripts/demo_tarot_v3.py
```

选择：
- `1` - 完整流程演示（推荐）
- `2` - 版本对比说明

---

## 📖 核心特性

### 🎴 固定三张牌阵
```
过去 → 现在 → 未来
```

### ✨ 渐进式体验
- 逐张翻牌（不是一次性展示）
- 每张牌后可暂停思考
- 翻牌动画增强仪式感

### 📊 完整功能
- ⭐ 星级评分（1-5星）
- 🌊 整体能量流分析
- 📌 一句话建议（≤20字）
- 🎴 牌间关联解读
- 🏆 群组排行榜（自动加入）
- 🌙 今日运势

### 💬 专业文案
- 产品经理级打磨
- 每个阶段都有清晰指引
- 紧凑布局，无冗余换行

---

## 🔧 如果遇到问题

### 问题1: 导入错误
```bash
# 检查是否有语法错误
python3 -m py_compile handlers/tarot.py
```

### 问题2: 回调不响应
- 检查 `main.py` 中的回调注册是否正确
- 确认按钮的 `callback_data` 与处理器的 `pattern` 匹配

### 问题3: 会话丢失
- 用户数据存储在 `context.user_data` 中
- 如果 Bot 重启，会话会丢失（正常现象）

---

## 📚 相关文档

- `docs/TAROT_REFACTOR_COMPLETE.md` - 完整重构报告
- `docs/tarot_progressive_v3.md` - 详细功能说明
- `docs/tarot_optimization_phase1.md` - Phase 1 优化
- `docs/tarot_card_relationship_optimization.md` - 牌间关联优化

---

## 🎉 开始使用

现在就启动你的 Bot，体验全新的渐进式塔罗占卜！

```bash
python3 main.py
```

然后在 Telegram 中输入：
```
/tarot 我的未来会怎样
```

**祝你占卜愉快！** 🔮✨
